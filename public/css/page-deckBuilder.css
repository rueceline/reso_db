/* public/styles/deckBuilder.css */

/* ========== base ========== */
.deck-builder {
  margin: 0 auto;
  padding: 16px;
  display: grid;
  gap: 16px;
}

.db-section {
  border: 1px solid rgba(0, 0, 0, 0.12);
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.9);
  padding: 12px;
}

.db-section-title {
  margin: 0 0 10px 0;
  font-size: 14px;
  font-weight: 700;
  letter-spacing: 0.2px;
  opacity: 0.9;
}

/* ========== common controls ========== */
.db-input,
.db-select {
  width: 100%;
  min-height: 34px;
  border: 1px solid rgba(0, 0, 0, 0.18);
  border-radius: 10px;
  padding: 8px 10px;
  background: #fff;
  outline: none;
}

.db-input:focus,
.db-select:focus {
  border-color: rgba(0, 0, 0, 0.35);
}

.db-btn {
  min-height: 34px;
  border: 1px solid rgba(0, 0, 0, 0.18);
  background: #fff;
  border-radius: 10px;
  padding: 6px 10px;
  cursor: pointer;
}

.db-btn:active {
  transform: translateY(1px);
}

/* ========== character slots ========== */
.db-character-slots {
  display: grid;
  grid-template-columns: repeat(5, minmax(0, 1fr));
  gap: 10px;
  margin-bottom: 10px;
}

.db-char-slot {
  height: 430px; /* ✅ 슬롯 높이 확대 */
  border-radius: 14px;
  border: 1px dashed rgba(0, 0, 0, 0.25);
  background: rgba(0, 0, 0, 0.03);
  cursor: pointer;
  position: relative;
  overflow: hidden; /* ✅ 슬롯 밖으로 이미지가 튀는 문제 방지 */
}

.db-char-slot:hover {
  background: rgba(0, 0, 0, 0.05);
}

/* ✅ 슬롯이 채워졌을 때(선택 후) 내부 레이아웃 고정 */
.db-char-slot.is-filled {
  display: grid;
  grid-template-rows: 1fr auto;
  gap: 6px;
  padding: 8px;
}

/* ✅ 이미지 영역은 항상 3/4 비율 유지 */
.db-slot-thumb {
  aspect-ratio: 3 / 4;
  width: 100%;
  border-radius: 10px;
  overflow: hidden;
  background: rgba(0, 0, 0, 0.04);
}

.db-slot-thumb img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.db-slot-name {
  font-size: 12px;
  font-weight: 700;
  text-align: center;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

/* 빈 슬롯 + 표시 */
.db-slot-empty {
  font-size: 28px;
  opacity: 0.6;
  display: grid;
  place-items: center;
  height: 100%;
}


.db-character-slots[data-active-slot] .db-char-slot[data-slot] {
  /* 기본: 변화 없음 */
}

.db-character-slots[data-active-slot="0"] .db-char-slot[data-slot="0"],
.db-character-slots[data-active-slot="1"] .db-char-slot[data-slot="1"],
.db-character-slots[data-active-slot="2"] .db-char-slot[data-slot="2"],
.db-character-slots[data-active-slot="3"] .db-char-slot[data-slot="3"],
.db-character-slots[data-active-slot="4"] .db-char-slot[data-slot="4"] {
  border-style: solid;
  border-color: rgba(0, 0, 0, 0.35);
  background: rgba(0, 0, 0, 0.06);
}

/* ========== panels ========== */
.db-skill-layout {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.db-panel {
  border: 1px solid rgba(0, 0, 0, 0.12);
  border-radius: 12px;
  background: rgba(255, 255, 255, 0.7);
  overflow: hidden;
}

.db-panel-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 10px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.08);
  background: rgba(0, 0, 0, 0.02);
}

.db-panel-title {
  font-size: 13px;
  font-weight: 700;
}

.db-panel-tools {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* ========== tags / filters placeholder ========== */
.db-tags,
.db-filters {
  padding: 10px;
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
}

.db-tags:empty,
.db-filters:empty {
  display: none;
}

/* ========== grid list placeholder ========== */
.db-grid {
  padding: 10px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); /* ✅ 카드 기본 크기 확대 */
  gap: 10px;
  min-height: 240px;
}

@media (max-width: 980px) {
  .db-skill-layout {
    grid-template-columns: 1fr;
  }
  .db-grid {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

@media (max-width: 640px) {
  .db-character-slots {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
  .db-grid {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }
}

/* ========== deck list placeholder ========== */
.db-deck {
  list-style: none;
  margin: 0;
  padding: 10px;
  min-height: 240px;
  display: grid;
  gap: 8px;
}

.db-deck:empty::before {
  content: "No cards selected";
  opacity: 0.6;
  font-size: 12px;
}

/* ✅ 모달 캐릭터 카드 표준(이미지 크기/비율 통일) */
.db-card {
  border: 1px solid rgba(0, 0, 0, 0.12);
  border-radius: 12px;
  background: #fff;
  cursor: pointer;
  text-align: left;
  overflow: hidden;
  padding: 0;
  display: grid;
  grid-template-rows: 1fr auto auto;
}

.db-card-media {
  aspect-ratio: 3 / 4; /* ✅ 요청: 3/4 */
  background: rgba(0, 0, 0, 0.04);
  overflow: hidden;
}

.db-card-media img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.db-card-title {
  padding: 8px 10px 0 10px;
  font-size: 12px;
  font-weight: 700;
}

.db-card-sub {
  padding: 2px 10px 10px 10px;
  font-size: 11px;
  opacity: 0.7;
}


/* ========== battle settings form ========== */
.db-form-grid {
  padding: 10px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px;
}

.db-field {
  display: grid;
  gap: 6px;
  align-content: start;
}

.db-field-label {
  font-size: 12px;
  opacity: 0.8;
}

@media (max-width: 640px) {
  .db-form-grid {
    grid-template-columns: 1fr;
  }
}

/* ========== modal ========== */
.db-modal {
  position: fixed;
  inset: 0;
  z-index: 50;
}

.db-modal[hidden] {
  display: none;
}

.db-modal-backdrop {
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
}

.db-modal-panel {
  position: relative;
  width: min(980px, calc(100vw - 24px));
  max-height: calc(100vh - 24px);
  margin: 12px auto;
  background: #fff;
  border-radius: 14px;
  border: 1px solid rgba(0, 0, 0, 0.12);
  overflow: hidden;
  display: grid;
  grid-template-rows: auto auto 1fr;
}

/* ✅ grid 3번째 영역(리스트)에서 스크롤 */
#character-list {
  overflow: auto;
  min-height: 0;
}


.db-modal-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  padding: 10px 12px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.08);
  background: rgba(0, 0, 0, 0.02);
}

.db-modal-title {
  font-weight: 700;
  font-size: 13px;
}

.db-modal-close {
  width: 34px;
  height: 34px;
  border-radius: 10px;
  border: 1px solid rgba(0, 0, 0, 0.18);
  background: #fff;
  cursor: pointer;
}

.db-modal-toolbar {
  padding: 10px 12px;
  border-bottom: 1px solid rgba(0, 0, 0, 0.06);
  display: grid;
  gap: 10px;
}

.db-modal-body {
  padding: 10px 12px;
  overflow: auto;
}

/* ========== subwindow ========== */
.db-subwindow {
  border: 1px solid rgba(0, 0, 0, 0.12);
  border-radius: 12px;
  overflow: hidden;
  background: #fff;
}

.db-subwindow[hidden] {
  display: none;
}

.db-subwindow-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 8px 10px;
  background: rgba(0, 0, 0, 0.02);
  border-bottom: 1px solid rgba(0, 0, 0, 0.08);
}

.db-subwindow-title {
  font-weight: 700;
  font-size: 13px;
}

.db-subwindow-close {
  width: 30px;
  height: 30px;
  border-radius: 10px;
  border: 1px solid rgba(0, 0, 0, 0.18);
  background: #fff;
  cursor: pointer;
}

.db-subwindow-body {
  padding: 10px;
  min-height: 120px;
}
