/* =========================================================
   equipmentStyle.css (organized)
   - 장비 DB 페이지 전용 스타일
   - 역할(섹션)별로 정리 + 주석 보강
   - 기존 동작 유지(스타일만 재배치)
   ========================================================= */

/* =========================================================
   1) Page Card (컨테이너 카드)
   ========================================================= */
.page-card {
  border: 1px solid rgba(255, 255, 255, 0.12);
  background: rgba(255, 255, 255, 0.06);
  border-radius: 18px;
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
  padding: 16px;
  overflow: hidden;
}

.page-title {
  margin: 0 0 8px;
  font-size: 22px;
}

.page-sub {
  margin: 0 0 14px;
  color: rgba(255, 255, 255, 0.70);
  line-height: 1.5;
}

/* =========================================================
   2) Toolbar (검색/상단 컨트롤 바)
   - 검색 입력, 총 개수 pill, 필터 초기화 pill, 정렬 select 등
   ========================================================= */
.toolbar {
  display: flex;
  gap: 10px;
  flex-wrap: wrap;
  margin-bottom: 10px;
}

.input {
  flex: 1;
  min-width: 220px;
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: rgba(0, 0, 0, 0.20);
  color: rgba(255, 255, 255, 0.92);
  border-radius: 12px;
  padding: 10px 12px;
  outline: none;
}

/* pill
   - span(총 n개) 뱃지에도 사용
   - button(필터 초기화)에도 사용
*/
.pill {
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.92);
  border-radius: 999px;
  padding: 9px 12px;
  white-space: nowrap;
}

/* pill이 button으로 사용될 때만 hover/cursor 부여 */
button.pill {
  cursor: pointer;
  user-select: none;
}

button.pill:hover {
  background: rgba(255, 255, 255, 0.10);
  border-color: rgba(255, 255, 255, 0.22);
}

button.pill:focus {
  outline: none;
}

/* 정렬 select (JS에서 툴바에 붙는 용도) */
.sort-select {
  flex: 0 0 auto;
  min-width: 180px;
}

/* =========================================================
   3) Filter Toggle (필터 토글 버튼)
   - data-selected="1"로 선택 상태 표시
   ========================================================= */
.toggle {
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: rgba(255, 255, 255, 0.06);
  color: rgba(255, 255, 255, 0.92);
  border-radius: 999px;
  padding: 8px 10px;
  font-size: 12px;
  cursor: pointer;
  user-select: none;
}

.toggle[data-selected="1"] {
  background: rgba(255, 255, 255, 0.18);
  border-color: rgba(255, 255, 255, 0.30);
}

.toggle:focus {
  outline: none;
}

/* hover: 선택/비선택 모두 명확히 */
.toggle:hover {
  background: rgba(255, 255, 255, 0.10);
  border-color: rgba(255, 255, 255, 0.22);
}

.toggle[data-selected="1"]:hover {
  background: rgba(255, 255, 255, 0.22);
  border-color: rgba(255, 255, 255, 0.34);
}

/* =========================================================
   4) Filters Layout (필터 라벨/버튼 정렬)
   - #filters.filter-grid 사용 시 2열 그리드(라벨/버튼)
   ========================================================= */
#filters {
  margin-bottom: 20px;
}

#filters.filter-grid {
  display: grid;
  grid-template-columns: 96px 1fr;
  gap: 18px 14px;
  align-items: stretch;
  padding-left: 16px;
}

#filters.filter-grid .filter-row {
  display: contents;
}

#filters.filter-grid .filter-label {
  font-weight: 800;
  white-space: nowrap;
  display: flex;
  align-items: center;
  min-height: 36px;
  padding-left: 8px;
}

#filters.filter-grid .filter-buttons {
  display: flex;
  flex-wrap: wrap;
  gap: 8px;
  align-items: center;
  min-height: 36px;
}

#filters.filter-grid .filter-row:last-child .filter-buttons {
  border-bottom: none;
}

/* Light theme 보정 */
html[data-theme="light"] #filters.filter-grid .filter-buttons {
  border-bottom: 1px solid rgba(0, 0, 0, 0.10);
}

html[data-theme="light"] #filters.filter-grid .filter-label {
  color: rgba(0, 0, 0, 0.85);
}

/* =========================================================
   5) Table Wrapper / Base Table
   - 가로 스크롤은 숨김(모바일은 컬럼 숨김으로 대응)
   ========================================================= */
.table-wrap {
  overflow-x: hidden;
  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, 0.12);
}

table {
  width: 100%;
  border-collapse: collapse;
  table-layout: fixed;
}

/* 헤더/셀 공통
   - 가로/세로 중앙정렬
*/
th,
td {
  border-bottom: 1px solid rgba(255, 255, 255, 0.10);
  padding: 7px 8px;
  font-size: 13px;
  vertical-align: middle;
  text-align: center;
}

/* sticky 헤더 */
th {
  position: sticky;
  top: 0;
  background: rgba(10, 14, 20, 0.85);
  backdrop-filter: blur(8px);
  font-weight: 800;
}

/* =========================================================
   6) Column Widths (컬럼 폭)
   1: 이미지 / 2: 이름 / 3: 희귀도 / 4: 분류 / 5: 소속
   6: 속성 / 7: 초기값 / 8: 최대값 / 9: 주옵션
   ========================================================= */
th:nth-child(1),
td:nth-child(1) {
  width: 112px;
}

th:nth-child(2),
td:nth-child(2) {
  width: 150px;
}

th:nth-child(3),
td:nth-child(3) {
  width: 84px;
}

th:nth-child(4),
td:nth-child(4) {
  width: 92px;
}

th:nth-child(5),
td:nth-child(5) {
  width: 108px;
}

th:nth-child(6),
td:nth-child(6) {
  width: 74px;
}

th:nth-child(7),
td:nth-child(7) {
  width: 78px;
}

th:nth-child(8),
td:nth-child(8) {
  width: 78px;
}

th:nth-child(9),
td:nth-child(9) {
  width: 300px;
}

/* =========================================================
   7) Cell Helpers / Content Styles
   ========================================================= */

/* 공통 중앙정렬용 클래스(JS에서 td에 붙여둠) */
.cell-center {
  text-align: center;
  vertical-align: middle;
}

/* 이름 링크 */
.eq-name-link {
  color: rgba(255, 255, 255, 0.94);
  text-decoration: none;
  font-weight: 800;
}

.eq-name-link:hover {
  text-decoration: underline;
}

/* 이름 셀: 글자 키우기 + 줄바꿈 허용 */
.cell-name .eq-name-link {
  font-size: 16px;
  line-height: 1.25;
  display: inline-block;
  max-width: 100%;
  word-break: keep-all;
  overflow-wrap: anywhere;
}

/* 주옵션
   - JS에서 \n을 <br>로 바꿔서 넣는 구조
   - 줄바꿈/워드브레이크 허용
*/
.main-option {
  white-space: normal;
  line-height: 1.35;
  overflow-wrap: anywhere;
  word-break: break-word;
}

/* =========================================================
   8) Thumbnail / Row Spacing
   ========================================================= */
.eq-thumb {
  width: 96px;
  height: 96px;
  max-width: 96px;
  max-height: 96px;
  object-fit: contain;
  display: block;
  margin: 0 auto;
  padding: 0;
  box-sizing: border-box;
  border-radius: 14px;
  border: 1px solid rgba(255, 255, 255, 0.14);
  background: rgba(255, 255, 255, 0.04);
}

/* 리스트 테이블 row/cell 패딩 보강 */
#equipmentList td:first-child {
  width: 112px;
  padding: 10px 12px;
  vertical-align: middle;
}

#equipmentList td:first-child a {
  display: block;
}

#equipmentList tr {
  min-height: 120px; /* 96px 아이콘 + 패딩 합 */
}

#equipmentList td {
  padding-top: 14px;
  padding-bottom: 14px;
  vertical-align: middle;
}

/* 이미지가 셀을 침범하지 않도록 강제 */
td:nth-child(1) img {
  max-width: 96px;
  max-height: 96px;
}

/* =========================================================
   9) Rarity Badge (희귀도)
   ========================================================= */
.rarity-badge {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 999px;
  font-weight: 900;
  font-size: 12px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  background: rgba(255, 255, 255, 0.06);
}

.rarity-ur {
  color: #ffb347;
  border-color: rgba(255, 179, 71, 0.55);
  background: rgba(255, 179, 71, 0.12);
}

.rarity-ssr {
  color: #ffd966;
  border-color: rgba(255, 217, 102, 0.55);
  background: rgba(255, 217, 102, 0.12);
}

.rarity-sr {
  color: #c084fc;
  border-color: rgba(192, 132, 252, 0.55);
  background: rgba(192, 132, 252, 0.12);
}

.rarity-r {
  color: #60a5fa;
  border-color: rgba(96, 165, 250, 0.55);
  background: rgba(96, 165, 250, 0.12);
}

.rarity-n {
  color: rgba(255, 255, 255, 0.85);
  border-color: rgba(255, 255, 255, 0.22);
  background: rgba(255, 255, 255, 0.08);
}

/* =========================================================
   10) Sorting UI (테이블 헤더 클릭 정렬)
   ========================================================= */
th.sortable {
  cursor: pointer;
  user-select: none;
  white-space: nowrap;
}

th.sortable:hover {
  background: rgba(255, 255, 255, 0.06);
}

th.sortable::after {
  content: "";
  display: inline-block;
  margin-left: 6px;
  opacity: 0.55;
}

th.sortable[data-sort-dir="asc"]::after {
  content: "▲";
  opacity: 0.9;
}

th.sortable[data-sort-dir="desc"]::after {
  content: "▼";
  opacity: 0.9;
}

/* =========================================================
   11) States (로딩/에러)
   ========================================================= */
.loading,
.error {
  padding: 16px;
  color: rgba(255, 255, 255, 0.75);
  white-space: pre-line;
}

/* =========================================================
   12) Theme Adjustments (라이트 테마)
   ========================================================= */
html[data-theme="light"] .eq-name-link {
  color: #0f172a;
}

/* =========================================================
   13) Responsive (반응형)
   - 980px: 주옵션 폭 축소
   - 860px: 중간 컬럼 숨김(분류/소속/주옵션)
   - 720px: 모바일 "이미지/이름/희귀도"만 표시(나머지 컬럼 숨김)
   ========================================================= */
@media (max-width: 980px) {
  th:nth-child(9),
  td:nth-child(9) {
    width: 220px;
  }
}

@media (max-width: 860px) {
  th:nth-child(4),
  td:nth-child(4),
  th:nth-child(5),
  td:nth-child(5),
  th:nth-child(9),
  td:nth-child(9) {
    display: none;
  }
}

/* 모바일: 장비 리스트는 [이미지/이름/희귀도]만 표시 */
@media (max-width: 720px) {
  /* 4번(분류)~9번(주옵션) 컬럼 숨김 */
  .equip-table thead th:nth-child(n + 3),
  .equip-table tbody td:nth-child(n + 3) {
    display: none;
  }

  /* 셀 패딩/행 높이 조정 */
  .equip-table th,
  .equip-table td {
    padding: 10px 10px;
  }

  /* 이름 줄임말 처리 */
  .equip-table .eq-name-link {
    display: block;
    max-width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }
}
